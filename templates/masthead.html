{% extends "base.html" %}

{% block content %}
<div class="container" style="padding: 40px; border-radius: 15px; box-shadow: 0 15px 40px rgba(0,0,0,0.15);">

    <h1 style="text-align:center; font-size:36px; margin-bottom:10px;">Project Masthead</h1>
    <p class="subtitle" style="text-align:center; color:#666; margin-bottom:35px;">
        Leadership, Contributors, Vision, and Project Information
    </p>

    <!-- Leadership -->
    <div class="section">
        <h2>ğŸš€ Project Leadership</h2>
        <div class="card-grid">
            <div class="card" style="padding:20px; text-align:center; border-radius:12px; box-shadow:0 5px 15px rgba(0,0,0,0.08); transition:0.3s;">
                <img src="https://github.com/Gooichand.png" alt="" style="width:80px; height:80px; border-radius:50%; margin-bottom:10px;">
                <h4>Gooichand</h4>
                <p>Project Admin & Lead</p>
                <a href="https://github.com/Gooichand" target="_blank">GitHub</a>
            </div>
        </div>
    </div>

    <!-- Vision -->
    <div class="section">
        <h2>ğŸ¯ Vision & Mission</h2>
        <p>
            Our mission is to provide a secure, transparent, and scalable system for managing student achievements
            while encouraging open-source collaboration and ethical development practices.
        </p>
    </div>

    <!-- Contributors -->
    <div class="section">
        <h2>ğŸŒŸ Contributors</h2>
        <div id="contributors" class="contributors" style="display:grid; grid-template-columns:repeat(auto-fit,minmax(200px,1fr)); gap:18px;">
            Loading contributors...
        </div>
        <div style="text-align:center; margin-top:20px;">
            <button id="toggleBtn" class="btn" style="padding:10px 25px; border:none; border-radius:25px; background:linear-gradient(135deg,#667eea,#764ba2); color:white; cursor:pointer;" onclick="toggleContributors()">
                View All Contributors
            </button>
        </div>
    </div>

    <!-- Communication -->
    <div class="section">
        <h2>ğŸ“¬ Communication & Support</h2>
        <p>
            ğŸ“§ Email: support@amsystem.com <br>
            ğŸ’¬ GitHub Issues: <a href="https://github.com/Gooichand/blockchain-evidence/issues" target="_blank">Link</a> <br>
            ğŸŒ Community: GitHub Discussions
        </p>
    </div>

    <!-- AI Usage -->
    <div class="section">
        <h2>ğŸ¤– AI & Automation Usage</h2>
        <p>
            AI tools (like GPT) are used for documentation, code suggestions, and productivity enhancements.
            All AI-generated content is reviewed before merging.
        </p>
    </div>

    <div class="footer" style="text-align:center; margin-top:40px;">
        <a href="{{ url_for('home') }}" style="padding:12px 25px; background:linear-gradient(135deg,#667eea,#764ba2); color:#fff; border-radius:25px; text-decoration:none;">â¬… Back to Home</a>
    </div>

</div>

<script>
const owner = "Gooichand";
const repo = "blockchain-evidence";

let allContributors = [];
let showAll = false;

async function loadContributors(){
    const container = document.getElementById("contributors");
    try{
        const res = await fetch(`https://api.github.com/repos/${owner}/${repo}/contributors?per_page=100`);
        allContributors = await res.json();
        renderContributors();
    }
    catch(err){
        container.innerHTML = "Failed to load contributors.";
        console.error(err);
    }
}

function renderContributors(){
    const container = document.getElementById("contributors");
    const btn = document.getElementById("toggleBtn");
    container.innerHTML = "";
    const list = showAll ? allContributors : allContributors.slice(0,8);

    list.forEach(user =>{
        const card = document.createElement("div");
        card.className = "card";
        card.style = "padding:15px; text-align:center; border-radius:12px; box-shadow:0 5px 15px rgba(0,0,0,0.08);";
        card.innerHTML = `
            <img src="${user.avatar_url}" style="width:60px; height:60px; border-radius:50%; margin-bottom:8px;">
            <h4>${user.login}</h4>
            <p>Contributions: ${user.contributions}</p>
            <a href="${user.html_url}" target="_blank">GitHub Profile</a>
        `;
        container.appendChild(card);
    });

    if(allContributors.length > 6){
        btn.style.display = "inline-block";
        btn.innerText = showAll ? "Show Less" : "View All Contributors";
    }else{
        btn.style.display = "none";
    }
}

function toggleContributors(){
    showAll = !showAll;
    renderContributors();
}

loadContributors();
</script>
{% endblock %}
